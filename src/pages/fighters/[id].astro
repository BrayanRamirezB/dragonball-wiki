---
import Layout from '@/layouts/Layout.astro'
import { type AllFighters, type Fighter } from '@/const/Fighter'
import FighterCard from '@/components/FighterCard'
import Header from '@/sections/Header.astro'

export async function getStaticPaths() {
  const data: AllFighters = await fetch(
    'https://dragonball-api.com/api/characters?limit=58'
  ).then((res) => res.json())

  return data.items.map((fighter) => ({
    params: { id: fighter.id },
    props: { fighter: fighter }
  }))
}

const { id } = Astro.params

const fighter: Fighter = await fetch(
  `https://dragonball-api.com/api/characters/${id}`
).then((res) => res.json())
---

<Layout>
  <Header
    firstAnchorHref='/#principal-fighters'
    firstAnchorText='Guerreros Z'
    secondAnchorHref='/#characters'
    secondAnchorText='Personajes'
  />
  <main
    class='max-w-6xl px-2 lg:px-10 mx-auto mt-40 md:mt-24 min-h-[calc(100vh-150px)]'
  >
    <FighterCard fighter={fighter} />
  </main>
</Layout>
